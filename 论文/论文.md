## 基于HTML5的手机APP交互方式 ----- 以逸宿APP为例

### 摘要

随着HTML5技术的不断发展和社区的壮大，手机APP的开发不仅仅限制于Object-C、Swift、UIKit框架、Java等编译性语言。而HTML5是制作APP的重要方法之一，它的可移植和便捷性给开发节省了很多不必要的成本，让开发人员更注重其中的交互方式等细节。在这样的背景下，对民宿类型的APP进行深入研究和分析，设计一款民宿APP，并站在用户的角度去分析体验其中的交互方式，界面流畅度。民宿APP交互界面主要由文字、图片、字体颜色、字体大小、图标等组成，因此民宿APP应该以用户认知规律和认知特点入手，制作适用、快捷、美观与审美高度统一的交互界面。本文主要通过以下几个方面去研究和实现这款民宿APP。
一，基于HTML5的React Native框架研究，实现APP的交互与功能。
二，基于nodejs的后台服务器技术，和mysql数据存储技术研发这款APP的后台服务，为客户端提供各种API服务接口完成用户操作。
三，分析与理解material design，将其成果应用在民宿APP上，比如光效、表面质感、运动感是解释物体运动规律、交互方式、空间关系的关键
四，分析用户心理，感官提高界面的交互设计的可行性和有用性
五，结合研究成果开始研发React Native可移植民宿APP

**关键词** ： HTML5，交互设计，民宿APP


### Abstract

With the continuous development of HTML5 technology and the growth of the community, the development of mobile APP is not limited to compiler languages ​​such as Object-C, Swift, UIKit framework, and Java. HTML5 is one of the most important ways to make an app. Its portability and convenience saves a lot of unnecessary costs for development, and allows developers to pay more attention to details such as the interaction mode. In this context, the B&B type of APP is deeply researched and analyzed, and a B&B APP is designed, and the interaction mode and interface fluency are analyzed from the perspective of the user. The homepage APP interactive interface is mainly composed of text, picture, font color, font size, icons, etc. Therefore, the homepage APP should start with the user's cognitive rules and cognitive characteristics, and make a highly interactive interface that is applicable, fast, beautiful and aesthetic. This article mainly studies and implements this homestay APP through the following aspects.
First, based on HTML5's React Native framework research, realize the interaction and function of APP.
Second, based on the background server technology of nodejs, and mysql data storage technology to develop the background service of this APP, providing various API service interfaces for the client to complete the user operation.
Third, analyze and understand material design, and apply its results to the homestay APP. For example, light effect, surface texture, and sense of movement are the key to explaining the law of motion, interaction, and spatial relationship.
Fourth, analyze the user's psychology, sensory and improve the feasibility and usefulness of the interactive design of the interface
V. Combine research results and start research and development of React Native Portable B&B APP

**Keywords** : HTML5, interactive design, homestay app


一，绪论
（一）引言
	随着移动设备的硬件的和移动设备操作系统的不断发展与完善，以及万维网联盟（W3C）的维护与推进，HTML5不仅仅是web标准，更多的是适应所有智能终端的使用，为移动互联时代的应用提供更加丰富与强大的开发标准。移动应用开发技术的过程可以分为三个阶段，从早期的WAP到现在的原生应用，再到HTML5标准基础的Web App。
（二）研究背景
	1. HTML5的发展与现状
		HTML5是HTML最新的修订版本，由万维网联盟（W3C）于2014年10月完成制度。目标是取代1999年所制定的HTML 4.01和XHTML 1.0标准，以期能在互联网应用迅速发展的时候，使网络标准达到匹配当代的网络需求。虽然处于发展阶段，但是现在大部分浏览器已经支持HTML5部分技术，各种平台已经开始支持基于HTML5的Native App，比如FaceBook发布的React Native从2012年开始，组织内部黑客马拉松来晚上原型，到2015年发布了React JavaScript Configuration的第一个版本。也有大部分公司，包括FaceBook的Group App已经开始使用React Natice开始混合开发模式。迄今为止，已经有大部分手机浏览器支持HTML5技术，还有很多公司的APP已经开始使用HTML5技术来制作企业级APP，HTML5标准将会是智能终端不可缺少的开发标准。
	2. 移动APP的发展现状
		在2019年2日28，我国互联网信息中心（CNNIC）发布的第43次《中国互联网络发展状况统计报告》报告中指出，截止2018年12月，我国手机网民规模为8.17亿，全年新增网民6433万，网民中使用手机上网的比例由2017年底的97.5%提升至2018年底的98.6%。自2012年以来，手机网民势头不减，占整体网民的98.6。面对这样的发展趋势，很多相关产商都在关注如何吸引用户来使用他们的产品达到APP市场的龙头企业。
		[图一，2018年网名规模和互联网普及率]
	3. 交互设计的重要性
		随着产品和用户体验日趋复杂、功能增多，给用户造成认知成本提高的前提下，人们对交互设计的需求变得越来越显性，从而交互设计在产品设计和界面设计中占有举足轻重的作用，交互设计是设计方法，而界面设计是交互设计的自然结果。交互设计是帮助用户对产品的认知，也是评判产品的有用性和可用性的标准，好的交互设计可以吸引用户停留和使用从而提高用户粘度（Customer Stickiness），达到产品利益最大化。
（三）研究的目的及意义
	随着科技的飞速发展，移动APP层出不穷，据统计2017年Apple Store应用已经突破210万，虽然苹果商店对APP质量有一定的审核力度，但是这些应用中有很大一部分还是不符合基本的审美标准，大量的广告，不合理的布局导致这些应用质量的不过关。界面设计是交互设计的自然体验，交互设计是APP设计中一个重要的流程，本文用“逸宿”APP来探讨交互设计在APP设计中占得比重以及如何去进行交互设计，主要手法包括参考Material Design、阅读相关文献、设计实践。

二，HTML5技术支持
	（一）HTML5技术探讨
		1. HTML5 svg，canvas技术对APP交互设计的重要性
			HTML5标准已经成型，各大浏览器平台也已经开始支持此项标准，此项标准还提供了svg和canvas元素，它拥有更好的节点优化和像素操作能力，能够运行复杂的动画而不需要占用浏览器资源，过去需要通过第三方插件Flash等实现动画反馈，现在JavaScript就可以实现，canvas支持填充，画笔，擦除等API。正是因为如此，现在有很多社区开始开源canvas绘图库，并且支持其中的3D绘图能力，有了技术的支持，交互设计才有更好的展现平台。交互设计中，给予用户良好的反馈是评价此款APP的重要标准。Material Design中表示，动画效果应该遵循以下四种原则。
			1，反应敏捷。一个物体通常都是充满活力，他可以快速的准确地在用户输入的位置做出响应
			2，自然的。平面设计也应该遵循物理世界的规律
			3，有意识的。物体运动应该感知周围的环境，包括周围其他的物体，可能被吸引，可能被排斥
			4，有意图的。物体运动都应该具有明确意图。比如，拖动物体到指定的地点是有一个明确的方向和目的
		2. HTML5 本地存储技术带来用户体验
			HTML5标准声明了离线存储，也就是说，基于浏览器或者Native APP中也可以使用本地持久化缓存技术。用户体验要素分为五层：表现层、框架层、结构层、范围层、战略层。而HTML5本地离线存储技术可以让临时性文件或操作被记录，在刷新或者下次登录进来不需要去重新去做已经做过的动作或录入数据，给用户带来良好的体验。不仅仅如此，在用户离线的情况下，结合前后端数据交互的技术，还能让用户体验到最新的数据，提高用户未连接到互联网情况下，对此项服务的使用和体验。
		3. AJAX技术和服务器的”无缝对接”
			Ajax是多种技术的整合, 其主要技术特征是：应用XHTML和CSS标准化、使用DOM实现动态显示和交互、采用XML和XSLT进行数据交换与处理、用XMLHttpRequest实现异步数据读取、用JavaScript绑定和处理所有数据。Ajax出现主要是为了解决传统web应用模型的缺点，每一个请求必须返回一个完整的HTML或者XML数据，Ajax的出现大大的减少了请求次数和数据冗余的情况。
	（二）服务器技术的探讨
		1. Node.js技术
			Node.js是一个能够在服务器端运行JavaScript的开放源代码、跨平台JavaScript运行环境。可以让程序脱离后台服务独立运行，并且已经被IBM、Microsoft等公司使用。Node.js社区也逐渐庞大，2015年天猫双十一大规模使用Node.js承担大量的页面渲染工作，包括天猫首页、大部分天猫频道页、双十一会场以及全部的活动页面。Node.js已经走向成熟，还有基于node.js的各种库，其中比较出名的就是npm，它是“node包管理器”，能很好的去管理各个模块。node.js也支持数据库操作，命令也极其简单，只需要使用npm下载mysql，然后连接到数据库即可进行读写操作。
	（三）HTML5在移动设备上的应用
			目前移动设备上的APP应用主要分为以下三种：Native App、Web App和Hybrid App。Native App（原生应用）是指基于手机操作系统平台开发的应用，开发语言各不相同，导致开发成本高，维护成本也高的情况，支持的设备也有局限，不跨平台。Web App（网络应用程序）是指运行在网页浏览器中的应用程序，不需要安装，也具备跨平台能力，直接更新服务器上的文件即可达到产品的迭代。Hybrid App是指混合开发模式，先使用HTML5技术编写然后通过框架打包成原生应用，具备原生应用的底层能力。原生应用最大优势在于可以运用大量复杂的动画效果，速度、性能比Web App高，所以到目前为止，HTML5标准不适合开发大型的，对性能要求很高的应用。
	（四）本章小结
		HTML5标准给APP开发带来了技术性革命，一定程度上解决了历史遗留问题，它带来的新的元素和新的API支持了语言和视频，还可以基于浏览器调用系统功能等。
三，设计实践 - “逸宿”APP
	（一）项目简介
		1. 项目背景
			旅游成为人们追求自由的一种方式，也是中国经济发展的重要推力之一。根据“中国旅游研究院”2019年1月30号发表的《“2018旅游经济运行盘点”系列报告（十）： 2018年旅游经济运行分析与2019年发展预测》中指出，旅游经济一直保持高于GDP增速的较快增长，预计2018年国内游客将达55.4亿人次。而旅游中必不可少的一个问题就是住房的问题，据了解，国内的房源是人数的三倍，这也就表示，有大量的闲置房源没人使用。市场上也有一些比较突出的住宿APP，但是在设计上和使用上都不尽如人意，他们的交互设计违背了基本原则、间距、文本大小、光效、动画等，没有用户体验。
		2. 预期目标
			通过研发“逸宿”APP，帮助出门在外的游客得到良好的旅游体验，拟解决旅游中带来的一系列问题，帮助那些房东将闲置的房源转化为金钱，保障房东和租户的人身安全。
	（二）用户分析
		1. 目标用户分析
			通过对各个旅游APP、重庆周边景点、问卷调查分析，发现对住宿类的APP有很高的依赖，并且对住宿类APP提供美食功能有强烈的需求，还发现有很多用户每一到两个月都会出行旅游或者出差一次，并且会使用APP预定房间。有部分用户是偶尔使用网站等工具预定房间。旅游次数的频繁是旅游住宿类APP使用的前提条件。根据以上调查结果，总结以下用户特性表 【图，用户特性表】
		2. 用户需求分析
			通过对符合目标用户的问卷调查进行分析，有35.7%为在校学生，有21.4%为普通职员，有14.3%为企业管理者。其中有92.9%的目标人群是为了旅游而预定房间，有7.1%是为了出差预定房间。并且有21.4%每月都会出差。根据用户问卷调查，可以看到出门在外基本上都需要合适的房源，有50%的目标人群会选择品牌连锁经济型酒店，但是旅游景点没有大量的类似酒店，并且在居中过程中，有很多困扰，比如，图片与真实情况不符、环境卫生差、安全问题等。用户对酒店的服务（13%）、价格（16）、位置（14%）还有周边环境（16%）很看重。因此，为了方便用户，满足用户在旅行中的需求，分别添加反馈界面、优惠信息、民宿位置与路线、周边环境全景图、房东服务评价、出行之前攻略功能，还有更多辅助性功能。【图，用户问卷调查表】
	（三）项目研发
		1. 交互设计
			1.1 交互流程与定律
				交互设计是定义、设计人造系统的行为的设计领域，是基于用户需求而制定的设计原则，它更关注的是用户行为和期望。交互设计流程可以分为以下几点
				1，任务分析，了解用户的活动及目的
				2，信息架构，将一个任务分割成无数个小的任务并总结视觉入口
				3，页面布局，将第二步得出的数据展示出来，并对其中的文字，图片，按钮按照定义的原则进行设计 【图，布局原则】
				4，原型设计，将前几步得出的理论或数据用原型工具实现出来。原型设计分为两种，一种为低保真原型，也就是以手绘的形式在纸张等媒介上表示。而另外一种则是高保真模型，利用电脑上的软件，制作可交互的原型，可以实时反馈交互设计的动作，能更真实的去体验产品。
				5，评估设计，确认交互设计的方案对用户活动的影响。
				交互设计的中，应该遵循内容优先、避免键盘输入、有效触摸与反馈、一致性等，以下就这以上原则结合毕业设计展开讨论
				1，内容优先，移动端APP的界面布局应该遵循内容优先原则。如下图【图，发布界面】，在布局上面标题的文字应该大于次标题的1/3，并且在界面中占据主导地位以符合移动设备的特征。因为移动设备的特性，一个页面展示的内容不宜过多，所以将发布房源分为以下几个步骤来规划内容，选择位置、可视化确认位置、房源的基本类型、房源的特色、房源周边情况、房源设施、最后则是房源入住的价格。其中有一点就是，减少用户手动去输入，全部已拖动或点击按钮的形式引导用户完成房源的发布，保证了空间的利用率又避免了键盘输入，符合交互设计原则中的简洁，高效。
				2，一致性，遵循一致性这个基础原则可以让产品更加易用，减低用户的认知成本，从而带来不错的用户体验。在设计过程中，基于Iphone XR的屏幕比例，大部分文字内容页面和主体界面都是按照边距36px，因为Iphone XR的屏幕比例和其它的不同，并且民宿类型的APP适合清新简约的风格，比普通30px的边距多一点，让用户浏览的更流畅，提高用户使用体验。再拿默认页举例，不同功能区之间的间距为80px，同一个功能区不同列竖向间距为24px，横向间距是12px。
				3，反馈，移动设计中，一般反馈可能有震动、闪光灯、声音等方式，界面层次则为动效。在“逸宿”APP中，就有多重界面层的反馈信息，比如底部操作栏【图，底部操作栏】之间的切换，页面之间的跳转，而不是很生硬的转换场景，应该运用合适的动画效果和缓动参数来实现有趣的交互与反馈。
			1.2 图标在移动APP上的应用
				图标在计算机中是以图片的形式传递信息，它象征着某种属性、功能，图标的设计方法分为多种，可以使用已有计算机软件，通过填充、描边、渐变手法完成信息的隐喻。比如以下这张图【图，所有图标】，有线性图标和填充图标，填充图标是告诉用户现在在什么界面，区别出其它同功能区的图标，下面每个图标中，都有一条线来点缀，表示光源的方向。Material design中指出，所有物料都应该遵循现实世界的物理规律，比如，两个同类物体的运动应该受另外一个影响，而不能一味的做规则性运动。【见图，material design运动（https://mdui-aliyun.cdn.w3cbus.com/design/static/media/motion/material-motion/Aware_01_Choreo-v2.webm）】。
				一个图标应该具有高识别度、便于记忆的功能，比如表示信息的图标，如下图，基于1024px的三倍图画布，线框厚度为20px，中间有三个小圆圈，和右上角实心小圆圈结合起来，给用户传递有未读信息，下方有一个向下的三角形，表示思考。填充性的信息图标，如下图【图，填充信息图标】，中间是一个笑脸，白色填充，给用户传递一种愉悦的心里按时。发布图标好像一架纸飞机，向外传递某种信息，便于记忆。【图，底部操作栏图标】
				移动设备上，图标的交互设计应该是清晰的、便捷的，通常过渡时长不高于300ms，过长会导致用户等待，给用户传达这个APP不方便等心里暗示。
			1.3 交互设计七大心理学与实践
				1.3.1 7±2法则
					7±2法则是指：人在处理信息的时候同时最多可以处理9个，最少可处理5个。也就是说，当用户同事操作任务的数量越少，注意力就越集中，正确率就越高。【图，收藏】见xx.xx图，房源地区分类界面中只展示6个tab，更多地区需要去滑动，并且右侧使用透明度说明还有更多信息展示，引导用户使用产品。
				1.3.2 席克定律
					席克定律的核心意义：人在面临选择越多的时候，所要消耗的时间成本越高。【图，席克定律】见xx.xx图，信息列表左滑只有只会展示一个删除按钮，而不会显示多种操作，也就不需要用户过多的思考就能继续完成工作。【图，我、房东信息图】见xx.xx图，通过“席克定律”将信息进行分类组合，帮助用户提高信息接收能力，减少了用户的认知成本，使信息更便于阅读和理解。通过席克定律还可以提高用户体验，【图，注册房源、更多设施、搜索、搜索结果】见xx.xx图，将注册房源的必要步骤分为多个页面去操作，并保留用户当前的操作，避免因为互联网导致房源注册失败需要重新录入数据，更多设施界面中，将房源的设施整理和分组，用图标的形式，以更直观的、简介的、有序的向用户展示这些信息，还有搜索界面和搜索结果界面，将推荐的信息和搜索结果的信息分类，让用户在不清楚怎么时候的前提下，也可以很快上手。
				1.3.3 费茨法则
					费茨法则 是一个人机交互以及人体工程学中人类活动的模型，它预测了快速移动到目标区域所需的时间是目标区域的距离和目标区域的大小的函数。【图，发布界面、发布房源】见xx.xx图，底部按钮浮在最靠近用户的空间上，突出展示了此界面的核心功能，还在交互上增大了该按钮的热点区域，让用户更快的找到入口。因为大部分用户都是使用右手进行触摸，所以在发布房源界面，右下角的下一步按钮，符合费茨法则中的两者距离越短越容易操作。
				1.3.4 莱斯托夫效应
					莱斯托夫效应指的是相对于普通事物，记住独特或特殊事物的可能性更大。【图，房源】见xx.xx图，“逸宿”APP主色为绿色，根据用户的问卷调查，大多数人都很注重价格这个选项，所以用深红色代表价格，让用户特别注意价格这个元素。
				1.3.5 格式塔原则
					格式塔原则是指整体与个体之间不是单一对等的关系。“逸宿”APP中我主要运用了其中的相似性原则、临近原则、封闭的原则、延续性原则、简单原则。【图，主页】见xx.xx图，美食功能区有横向滑动展示，还有竖向展示，但是用户不会认为这是两个不同的区域，而是会把这个区域归纳为一体。【图，房东信息】见xx.xx图，用户会把房东的标签和房东的名字、个性签名、头像联想为一个整体。【图，主页、收藏、搜索】见xx.xx图，我们利用其封闭性原则将未能全部展示的信息进行截断处理，故意留一部分在可见区域内，引导用户操作。在整个APP界面设计中，都运用了其延续性原则，界面的两边间距，顶部对齐，底部对齐等，用户在浏览的过程中，自然的从一个功能区移动到另一个功能区而不会很突兀，保持了界面风格的统一。
				1.3.6 本能反应
					本能反应是指：用户第一眼见到产品时的感受，而此时用户还没有与产品产生交互。“逸宿”APP的欢迎页，主页都是经过反复的琢磨与迭代，直观、简介的表明APP的功能，给用户本能的反应。
				1.3.7 色彩心理学
					色彩心理透过视觉开始，从知觉、感情到记忆、思想、意志、象征等，其反应与变化是极为复杂的。比如在“逸宿”APP中，采用互补配色方案，输入框的焦点状态为蓝色，可点击状态为绿色，用红色表示警示状态或特别重要的状态。【图，收藏-xx】在收藏界面，通过背景遮罩，显示删除收藏框，取消则用普通的蓝色表示。基本上所有界面都采用白色或者灰白色为背景，采用深黑色为文字，并且对文字或者边框进行分级，重要文字为#2E3130，普通文字为#5F6564，次要文字为#8F9895，占位文字为#C5D1CD，边框则分为四个等级，分别为：#E3E9E6、#E4ECE8、#EBF5F1、#F8FFFC。【图，配色方案、主色调辅色调】
		2. 技术架构
			1. 界面架构
				1.1 框架对比
					前端开发中，目前有三大框架，Vue、React、Angular。“逸宿”APP前端上则采用vue进行快速开发，因为vue在小型应用和快速迭代中占据主导优势，社区也比较完善，并且随着vue2.0问世，国内很多公司都在使用vue来更新自家的产品，所以vue更适合此APP开发。
				1.2 vue应用
					a，vue实践 - “逸宿”
					vue有很完善一套系统，vue-router、axios、vuex等，这些都是为vue量身订造的插件，也经过了各种业务考验。一下就部分代码进行详细说明，并分析其中的技术难点和解决方案。界面总共有以下几种分类，全屏弹出类、信息展示类、功能类界面，这些可以剥离为一个组件以供重复使用和减少代码，使用less编写组件样式，然后使用vue中的component，使用is特性或者slot分发内容来达到样式复用，使用ref方法或者emit回调方法提供对外接口或数据。【图，代码】
					“逸宿”APP主要有以下几条流程
					一，预定房间 - 房间详情 - 预定 - 支付 - 注意事项 - 完成 - 评价
					二，发布 - 发布房间 - 房间位置 - 确认位置 - 房源类型 - 房源特色 - 入住规则 - 房源设施 - 房源周边 - 房源价格
					三，发布 - 发布故事 - 故事内容 - 关联房源 - 完成
					--等APP开发完成再继续写这个模块--
					b，充分发挥vue渐进式与组件开发
			3. Django - 服务器技术的实现
				django是一个开放源代码的Web应用框架，由Python写成。采用了MVT的软件设计模式，即模型Model，视图View和模板Template。之所以选择django来进行后台开发，是因为它的MVT设计模式，类似于Vue的MVVM模式，都有模型和试图两种层次，只是django是数据库驱动，而vue则是数据驱动，其实，从根本上都是数据驱动。两者都注重敏捷开发和组件化，注重组件的“可抽拔性”。django框架还包括了
				一，轻量级的、独立的web服务器，便于开发和调试。
				二，表单序列化和系统系统，用于验证HTML表单和数据库之间数据转换
				三，缓存框架，并有几种缓存方式选择。一般使用Memcached、文件系统缓存、本地内存缓存，不过这都是针对大流量的网站系统，小型站点一般不会选择其中的缓存系统
				四，中间件支持，允许对请求处理的所有阶段进行干涉和处理。比如，一个url请求过来需要设置session，就可以通过中间件的形式去干预
			4. 实时反馈技术
				在Django中，可以通过Django Channels使用WebSockets达到实时反馈信息，比如预定房间查看此房间的可预订性。在“逸宿”中主要运用在与房东沟通上，因为需要实时去获取信息，而WebSockets是一种在建立在TCP连接上进行双方通信的协议。它已经被W3C定位标准，也就是说服务器可以主动向客户端推送数据，只需要完成一次握手，客户端和服务端就可以创建持久性链接，而普通的通信协议必须使用心跳，也就是循环发起请求来获取最新数据。
	（四）项目测试
		1. 浏览器平台兼容性
		2. 系统内核兼容
四，总结与展望
	（一）总结
	（二）展望